{
    "swagger": "2.0",
    "info": {
        "description": "API documentation for Carga",
        "version": "1.0.0",
        "title": "Carga API",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "email": "agarmar6@etsfinf.upv.es"
        }
    },
    "host": "localhost:8000",
    "basePath": "/",
    "schemes": [
        "https"
    ],
    "securityDefinitions": {
        "api_key": {
            "type": "apiKey",
            "name": "api_key",
            "in": "query",
            "x-default": "FUpP6o1K026VbhSuRBF0ehkKjqc5pztig_tTpn1tBeY"
        }
    },
    "security": [
        {
            "api_key": []
        }
    ],
    "tags": [
        {
            "name": "Carga",
            "description": "Endpoints related to data loading"
        },
        {
            "name": "Base de Datos",
            "description": "Endpoints para gestionar la base de datos"
        },
        {
            "name": "Log General",
            "description": "Endpoints para obtener logs combinados de múltiples fuentes"
        }
    ],
    "paths": {
        "/load": {
            "post": {
                "tags": [
                    "Carga"
                ],
                "summary": "Load data into the database",
                "description": "Endpoint to initialize the database and load data using the specified extractor types (csv, json, xml).",
                "parameters": [
                    {
                        "name": "types",
                        "in": "query",
                        "description": "The types of extractors to use (csv, json, xml)",
                        "required": true,
                        "type": "array",
                        "items": {
                            "type": "string",
                            "enum": [
                                "csv",
                                "json",
                                "xml"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Database initialized and data loaded successfully"
                    },
                    "400": {
                        "description": "Invalid extractor type"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/borrar-tablas": {
            "delete": {
                "tags": [
                    "Base de Datos"
                ],
                "summary": "Borrar todas las tablas de la base de datos",
                "description": "Borra todas las tablas de la base de datos y las recrea vacías",
                "responses": {
                    "200": {
                        "description": "Todas las tablas han sido borradas exitosamente"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Error al borrar las tablas"
                    }
                }
            }
        },
        "/log/general": {
            "get": {
                "tags": [
                    "Log General"
                ],
                "summary": "Obtener informe general completo",
                "description": "Obtiene un informe detallado que incluye estadísticas generales, estadísticas por fuente, y detalles de registros rechazados y reparados de las fuentes especificadas.",
                "parameters": [
                    {
                        "name": "sources",
                        "in": "query",
                        "description": "Fuentes de datos a incluir en el informe (separadas por comas)",
                        "required": true,
                        "type": "array",
                        "items": {
                            "type": "string",
                            "enum": [
                                "csv",
                                "json",
                                "xml"
                            ]
                        },
                        "collectionFormat": "csv"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Informe general obtenido exitosamente",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Fuentes no especificadas o inválidas"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Logs no encontrados"
                    },
                    "500": {
                        "description": "Error al generar el informe"
                    }
                }
            }
        }
    }
}